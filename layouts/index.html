{{ define "main" }}
<div class="portfolio-page">

    <!-- Hero Section -->
    <section class="portfolio-hero">
        <h1 class="hero-name">{{ .Site.Params.portfolio_name | default .Site.Author.name | default .Site.Title }}</h1>
        <p class="hero-title">{{ .Site.Params.portfolio_title | default "Product Designer" }}</p>
        <p class="hero-about">{{ .Site.Params.portfolio_about | default .Site.Params.itunes_description }}</p>
    </section>

    <!-- Case Studies -->
    <section class="case-studies">
        {{ range where .Site.RegularPages "Type" "post" }}
            {{ $categories := .Params.categories }}
            {{ $category := "" }}
            {{ if $categories }}
                {{ $category = index $categories 0 }}
            {{ end }}

            <article class="case-study-card">
                <div class="case-study-content">
                    {{/* Category icon/badge */}}
                    {{ if $category }}
                    <div class="case-study-badge">
                        <span class="badge-icon">{{ substr $category 0 1 | upper }}</span>
                    </div>
                    {{ end }}

                    {{/* Title */}}
                    <h2 class="case-study-title">{{ .Title | default "Untitled Project" }}</h2>

                    {{/* Meta: Category & Year */}}
                    <p class="case-study-meta">
                        {{ if $category }}<span class="meta-category">{{ $category | title }}</span>{{ end }}
                        <span class="meta-year">{{ .Date.Format "2006" }}</span>
                    </p>

                    {{/* Description */}}
                    <p class="case-study-description">
                        {{ .Summary | plainify | truncate 150 }}
                    </p>

                    {{/* Read More Button */}}
                    <a href="{{ .Permalink }}" class="case-study-button">
                        Read More <span class="button-arrow">â†’</span>
                    </a>
                </div>

                <div class="case-study-images">
                    {{ with .Params.photos }}
                        {{ range first 3 . }}
                        <div class="case-study-image">
                            <img src="{{ . }}" alt="Project screenshot" loading="lazy">
                        </div>
                        {{ end }}
                    {{ else }}
                        <div class="case-study-placeholder">
                            <span>{{ substr (.Title | default "P") 0 1 | upper }}</span>
                        </div>
                    {{ end }}
                </div>
            </article>
        {{ end }}
    </section>

</div>
{{ end }}
