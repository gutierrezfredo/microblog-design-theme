{{ define "main" }}
<div class="portfolio-page">

    <!-- Hero Section -->
    <section class="portfolio-hero">
        <h1 class="hero-name">{{ .Site.Params.portfolio_name | default .Site.Author.name | default .Site.Title }}</h1>
        <p class="hero-title">{{ .Site.Params.portfolio_title | default "Product Designer" }}</p>
        <p class="hero-about">{{ .Site.Params.portfolio_about | default .Site.Params.itunes_description }}</p>
    </section>

    <!-- Section Header -->
    <div class="section-header">
        <h2 class="section-label">Selected Work</h2>
    </div>

    <!-- Portfolio Grid -->
    <section class="portfolio-grid">
        {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
            {{ $pages := $taxonomy.Pages }}
            {{ if gt (len $pages) 0 }}
                {{ $latestPost := index $pages 0 }}

                {{/* Get thumbnail from photos array */}}
                {{ $thumbnail := "" }}
                {{ with $latestPost.Params.photos }}
                    {{ $thumbnail = index . 0 }}
                {{ end }}

                <a href="/categories/{{ $name | urlize }}/" class="category-card">
                    <div class="card-thumbnail">
                        {{ if $thumbnail }}
                            <img src="{{ $thumbnail }}" alt="{{ $name }}" loading="lazy">
                        {{ else }}
                            <div class="card-placeholder">
                                <span>{{ substr $name 0 1 | upper }}</span>
                            </div>
                        {{ end }}
                    </div>
                    <div class="card-overlay">
                        <h3 class="card-name">{{ $name | title }}</h3>
                        <span class="card-count">{{ len $pages }} {{ if eq (len $pages) 1 }}project{{ else }}projects{{ end }}</span>
                    </div>
                </a>
            {{ end }}
        {{ end }}
    </section>

</div>
{{ end }}
